@model PiperPicker.Models.SettingsModel

<form method="post" data-ajax="true" data-ajax-url="api/settings/lightcontroller-add" data-ajax-update="#panel" data-ajax-method="post">
    Hostname: <input type="text" name="hostname" />
    <input type="submit" value="Add" />
</form>

<div class="group-container">

    @foreach (var lightSetting in Model.LightSettings)
    {
        <div class="controls-container">
            <span>@lightSetting.Hostname</span>
            <form method="post" data-ajax="true" data-ajax-url="api/settings/lightcontroller-remove" data-ajax-update="#panel" data-ajax-method="post">
                <input hidden type="text" name="hostname" value="@lightSetting.Hostname" />
                <input type="submit" value="Delete" />
            </form>
            <div class="group-container">
                @foreach (var scheduleItem in lightSetting.State.Schedule)
                {
                    <p>@($"{scheduleItem.hour}:{scheduleItem.minute} r:{scheduleItem.r} g:{scheduleItem.g} b:{scheduleItem.b}")</p>
                    <form method="post" data-ajax="true" data-ajax-url="api/lighting/scheduleitem-remove" data-ajax-update="#panel" data-ajax-method="post">
                        <input hidden type="text" name="hostname" value="@lightSetting.Hostname" />
                        <input hidden type="text" name="hour" value="@scheduleItem.hour" />
                        <input hidden type="text" name="minute" value="@scheduleItem.minute" />
                        <input type="submit" value="Delete" />
                    </form>
                }
                <form method="post" data-ajax="true" data-ajax-url="api/lighting/scheduleitem-add" data-ajax-update="#panel" data-ajax-method="post">
                    <input hidden type="text" name="hostname" value="@lightSetting.Hostname" />
                    <input type="text" name="hour" value="0" />
                    <input type="text" name="minute" value="0" />
                    <input type="text" name="wrgb" value="#000000" />
                    <input type="submit" value="Add" />
                </form>
            </div>
        </div>
        <br>
    }

</div>